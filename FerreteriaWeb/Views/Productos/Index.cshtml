@model List<FerreteriaWeb.Models.ProductoViewModel>

@{
    var productosBajoStock = Model.Count(p => p.Stock <= p.StockMinimo);
    var totalInventario = Model.Sum(p => p.Stock * p.Precio);
}

<h2>Lista de Productos</h2>
<a asp-action="Create" class="btn btn-success mb-3">        
    + Nuevo Producto </a>

<div class="mb-3">
    <strong>Total valorizado del inventario:</strong>
    S/ @totalInventario.ToString("F2")
</div>

<table class="table">
    <thead>
        <tr>
            <th>Id</th>
            <th>Nombre</th>
            <th>Precio</th>
            <th>Stock</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var producto in Model)
        {
            <tr class="@(producto.Stock <= producto.StockMinimo ? "table-danger" : "")">
                <td>@producto.Id</td>
                <td>@producto.Nombre</td>
                <td>S/ @producto.Precio.ToString("F2")</td>
                <td>@producto.Stock</td>
            </tr>
        }
    </tbody>
</table>